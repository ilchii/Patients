<Page x:Class="Patients.EpisodeCreationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="EpisodeCreationPage">
    <Grid Background="Transparent" Margin="20" PreviewMouseDown="MainGrid_PreviewMouseDown">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Search -->
            <RowDefinition Height="*"/>
            <!-- List -->
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <!-- Selected symptoms -->
        </Grid.RowDefinitions>

        <!-- Search box -->
        <TextBox x:Name="SearchBox" Margin="0,0,0,10" 
                 TextChanged="SearchBox_TextChanged"/>

        <!-- Symptoms list -->
        <ListBox x:Name="SymptomsListBox" Grid.Row="1" Height="100" SelectionMode="Single"
                 SelectionChanged="SymptomsListBox_SelectionChanged"/>

        <!-- Selected symptoms -->
        <StackPanel Grid.Row="2" Margin="0,20,0,0">
            <TextBlock Text="Selected Symptoms:" FontWeight="Bold"/>
            <WrapPanel x:Name="SelectedSymptomsPanel" Margin="0,10,0,0"/>
        </StackPanel>

        <StackPanel Grid.Row="3" Margin="20" Orientation="Vertical" Background="#F9F9F9">
            <!-- Collapsible ICPC-2 Diagnosis Selector -->
            <TextBlock Text="Diagnosis (ICPC-2)" FontWeight="Bold" Margin="20,10,0,5"/>
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Background="White">
                <StackPanel>
                    <!-- Search Box Acting As Toggle -->
                    <TextBox x:Name="ICPC2SearchBox"
                     Height="30"
                     Padding="5"
                     VerticalContentAlignment="Center"
                     PreviewMouseDown="ICPC2SearchBox_PreviewMouseDown"
                     TextChanged="ICPC2SearchBox_TextChanged"
                     />

                    <!-- Dropdown List -->
                    <ListBox x:Name="ICPC2ListBox"
                     Visibility="Collapsed"
                     MaxHeight="150"
                     SelectionChanged="ICPC2ListBox_SelectionChanged"
                     DisplayMemberPath="Display" />
                </StackPanel>
            </Border>

            <!-- ICD-10 Diagnosis Section -->
            <TextBlock Text="Diagnosis (ICD-10)" FontWeight="Bold" Margin="20,10,0,5"/>
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Background="White">
                <StackPanel>
                    <TextBox x:Name="ICD10SearchBox"
                     Height="30"
                     Padding="5"
                     VerticalContentAlignment="Center"
                     PreviewMouseDown="ICD10SearchBox_PreviewMouseDown"
                     TextChanged="ICD10SearchBox_TextChanged"
                     />
                    
                    <ListBox x:Name="ICD10ListBox"
                     Visibility="Collapsed"
                     MaxHeight="150"
                     SelectionChanged="ICD10ListBox_SelectionChanged"
                     DisplayMemberPath="Display" />
                </StackPanel>
            </Border>

            <TextBlock x:Name="SelectedDiagnosisTextBlock"
               FontWeight="SemiBold"
               FontSize="14"
               Foreground="DarkSlateGray"
               Margin="0,20,0,0"/>
        </StackPanel>
    </Grid>
</Page>
