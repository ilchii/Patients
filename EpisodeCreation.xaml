<Page x:Class="Patients.EpisodeCreationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
      xmlns:sys="clr-namespace:System;assembly=System.Runtime" 
      xmlns:local="clr-namespace:Patients"
      Title="EpisodeCreationPage">
    <Grid Background="#F0FFF0" Margin="20" PreviewMouseDown="MainGrid_PreviewMouseDown">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Search box -->
        <TextBox x:Name="SearchBox" Margin="0,0,0,10" 
                 TextChanged="SearchBox_TextChanged"
                 Height="30" Padding="5" FontSize="14" Background="White" BorderBrush="#90EE90"/>

        <!-- Symptoms list -->
        <ListBox x:Name="SymptomsListBox" Grid.Row="1" Height="100" SelectionMode="Single"
                 SelectionChanged="SymptomsListBox_SelectionChanged" BorderBrush="#90EE90"/>

        <!-- Selected symptoms -->
        <StackPanel Grid.Row="2" Margin="0,20,0,0">
            <TextBlock Text="Selected Symptoms:" FontWeight="Bold" FontSize="16" Foreground="#2E8B57"/>
            <WrapPanel x:Name="SelectedSymptomsPanel" Margin="0,10,0,0" />
        </StackPanel>

        <!-- Diagnosis section -->
        <Border Grid.Row="3" Margin="20" Background="#FFFFFF" CornerRadius="8" BorderBrush="#90EE90" BorderThickness="1">
            <StackPanel Orientation="Vertical">
                <!-- ICPC-2 Diagnosis -->
                <TextBlock Text="Diagnosis (ICPC-2)" FontWeight="Bold" Margin="0,0,0,5" FontSize="15" Foreground="#2E8B57"/>
                <Border BorderBrush="#90EE90" BorderThickness="1" CornerRadius="4" Background="White">
                    <StackPanel>
                        <TextBox x:Name="ICPC2SearchBox" Height="30" Padding="5" VerticalContentAlignment="Center"
                                 PreviewMouseDown="ICPC2SearchBox_PreviewMouseDown"
                                 TextChanged="ICPC2SearchBox_TextChanged"
                                 Background="White" BorderBrush="#90EE90"/>
                        <ListBox x:Name="ICPC2ListBox" Visibility="Collapsed" MaxHeight="150"
                                 SelectionChanged="ICPC2ListBox_SelectionChanged"
                                 DisplayMemberPath="Display" BorderBrush="#90EE90"/>
                    </StackPanel>
                </Border>

                <!-- ICD-10 Diagnosis -->
                <TextBlock Text="Diagnosis (ICD-10)" FontWeight="Bold" Margin="20,10,0,5" FontSize="15" Foreground="#2E8B57"/>
                <Border BorderBrush="#90EE90" BorderThickness="1" CornerRadius="4" Background="White">
                    <StackPanel>
                        <TextBox x:Name="ICD10SearchBox" Height="30" Padding="5" VerticalContentAlignment="Center"
                                 PreviewMouseDown="ICD10SearchBox_PreviewMouseDown"
                                 TextChanged="ICD10SearchBox_TextChanged"
                                 Background="White" BorderBrush="#90EE90"/>
                        <ListBox x:Name="ICD10ListBox" Visibility="Collapsed" MaxHeight="150"
                                 SelectionChanged="ICD10ListBox_SelectionChanged"
                                 DisplayMemberPath="Display" BorderBrush="#90EE90"/>
                    </StackPanel>
                </Border>

                <UniformGrid Columns="2" Margin="0,20,0,0">
                    <StackPanel Margin="10">
                        <TextBlock Text="Дата виявлення" FontWeight="SemiBold" Foreground="#2E8B57"/>
                        <DatePicker x:Name="DiscoveryDatePicker" SelectedDate="{x:Static sys:DateTime.Now}"
                                    Height="30" FontSize="14" Background="White" BorderBrush="#90EE90"/>
                    </StackPanel>

                    <StackPanel Margin="10">
                        <TextBlock Text="Клінічний статус" FontWeight="SemiBold" Foreground="#2E8B57"/>
                        <TextBox x:Name="ClinicalStatusBox" Text="Активний" IsReadOnly="True"
                                 Tag="ClinicalStatusList" Height="30" FontSize="14" Background="White" BorderBrush="#90EE90"
                                 PreviewMouseDown="Generic_PreviewMouseDown" LostFocus="Generic_LostFocus"/>
                        <ListBox x:Name="ClinicalStatusList" Visibility="Collapsed" BorderBrush="#90EE90"
                                 SelectionChanged="Generic_SelectionChanged">
                            <ListBoxItem Content="Активний"/>
                            <ListBoxItem Content="Неактивний"/>
                        </ListBox>
                    </StackPanel>

                    <StackPanel Margin="10">
                        <TextBlock Text="Статус достовірності" FontWeight="SemiBold" Foreground="#2E8B57"/>
                        <TextBox x:Name="ReliabilityStatusBox" Text="Заключний" IsReadOnly="True"
                                 Tag="ReliabilityStatusList" Height="30" FontSize="14" Background="White" BorderBrush="#90EE90"
                                 PreviewMouseDown="Generic_PreviewMouseDown" LostFocus="Generic_LostFocus"/>
                        <ListBox x:Name="ReliabilityStatusList" Visibility="Collapsed" BorderBrush="#90EE90"
                                 SelectionChanged="Generic_SelectionChanged">
                            <ListBoxItem Content="Заключний"/>
                            <ListBoxItem Content="Неперевірений"/>
                        </ListBox>
                    </StackPanel>

                    <StackPanel Margin="10">
                        <TextBlock Text="Стадія захворювання" FontWeight="SemiBold" Foreground="#2E8B57"/>
                        <TextBox x:Name="DiseaseStageBox" Text="Значення за замовчуванням" IsReadOnly="True"
                                 Tag="DiseaseStageList" Height="30" FontSize="14" Background="White" BorderBrush="#90EE90"
                                 PreviewMouseDown="Generic_PreviewMouseDown" LostFocus="Generic_LostFocus"/>
                        <ListBox x:Name="DiseaseStageList" Visibility="Collapsed" BorderBrush="#90EE90"
                                 SelectionChanged="Generic_SelectionChanged">
                            <ListBoxItem Content="Значення за замовчуванням"/>
                            <ListBoxItem Content="Недостовірний"/>
                        </ListBox>
                    </StackPanel>

                    <StackPanel Margin="10">
                        <TextBlock Text="Ступінь тяжкості стану" FontWeight="SemiBold" Foreground="#2E8B57"/>
                        <TextBox x:Name="ConditionSeverityBox" Text="Важкий" IsReadOnly="True"
                                 Tag="ConditionSeverityList" Height="30" FontSize="14" Background="White" BorderBrush="#90EE90"
                                 PreviewMouseDown="Generic_PreviewMouseDown" LostFocus="Generic_LostFocus"/>
                        <ListBox x:Name="ConditionSeverityList" Visibility="Collapsed" BorderBrush="#90EE90"
                                 SelectionChanged="Generic_SelectionChanged">
                            <ListBoxItem Content="Важкий"/>
                            <ListBoxItem Content="Легкий"/>
                            <ListBoxItem Content="Середньої тяжкості"/>
                        </ListBox>
                    </StackPanel>

                    <StackPanel Margin="10">
                        <TextBlock Text="Тип захворювання" FontWeight="SemiBold" Foreground="#2E8B57"/>
                        <TextBox x:Name="DiseaseTypeBox" Text="гостре захворювання" IsReadOnly="True"
                                 Tag="DiseaseTypeList" Height="30" FontSize="14" Background="White" BorderBrush="#90EE90"
                                 PreviewMouseDown="Generic_PreviewMouseDown" LostFocus="Generic_LostFocus"/>
                        <ListBox x:Name="DiseaseTypeList" Visibility="Collapsed" BorderBrush="#90EE90"
                                 SelectionChanged="Generic_SelectionChanged">
                            <ListBoxItem Content="гостре захворювання"/>
                            <ListBoxItem Content="вперше зареєстроване хронічне"/>
                            <ListBoxItem Content="раніше відоме хронічне"/>
                            <ListBoxItem Content="загострення хронічного"/>
                            <ListBoxItem Content="інше"/>
                        </ListBox>
                    </StackPanel>
                </UniformGrid>
            </StackPanel>
        </Border>
    </Grid>
</Page>
